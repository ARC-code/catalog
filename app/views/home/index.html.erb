<h1>Collex Catalog</h1>
<p id="notice"><%= notice %></p>
<p id="alert"><%= alert %></p>
<p>This is a web service for searching the documents in Collex.</p>
<p>To use, call this in one of the following ways. It is meant to be used as a web service, but you can also type the
	values into your browser to interactively test your parameters. If you leave off the ".xml" in the following calls,
	the results will be formatted better for a browser.
</p>
<p>
	TODO: The following questions on the format are unresolved:
	<ul>
		<li>The plus sign is used in a lot of places, but that needs to be escaped. It seems like that is a place that will annoy and trip up visitors.</li>
		<li>The question mark and asterisk may also be an annoyance.</li>
		<li>Should parentheses be allowed?</li>
		<li>For multiple parameters, they should get specified like: +never-more, but the hyphen seems to work like quotes instead.</li>
	</ul>
</p>
<h1>API Details</h1>
<h2><div class="expander" data-target="totals"></div>Totals:</h2>
<div id="totals" class="exp_target hidden">
<p>Call <%= example_link("/search/totals.xml") %> to get a list of all the federations and how many documents and archives they contain.</p>
</div>

<h2><div class="expander" data-target="search"></div>Search Queries:</h2>
<div id="search" class="exp_target hidden">
<p>Note: All searches are case-insensitive and punctuation cannot be searched for.</p>
<p>Call /search.xml with the following parameters:</p>
<%= render :partial => 'params', :locals => { :params => @query_params } %>
<p>Example: Search for all mention of "tree" by Whitman <%= example_link("/search.xml?q=tree&aut=whitman") %></p>
</div>

<h2><div class="expander" data-target="autocomplete"></div>Autocomplete Queries:</h2>
<div id="autocomplete" class="exp_target hidden">
<p>Call /search/autocomplete.xml with the following parameters:</p>
<%= render :partial => 'params', :locals => { :params => @autocomplete_params } %>
<p>Example: Autocomplete "tre" by Whitman <%= example_link("/search/autocomplete.xml?field=content&frag=tre&aut=whitman") %></p>
</div>

<h2><div class="expander" data-target="names"></div>Names Faceting Queries:</h2>
<div id="names" class="exp_target hidden">
<p>Call /search/names.xml with the following parameters:</p>
<%= render :partial => 'params', :locals => { :params => @names_params } %>
<p>Example: All authors, publishers, and editors who mention "tree" and Whitman <%= example_link("/search/names.xml?field=content&frag=tre+whitman") %></p>
</div>

<h2><div class="expander" data-target="uri"></div>URI Queries:</h2>
<div id="uri" class="exp_target hidden">
<p>Call /search.xml with the following parameters:</p>
<%= render :partial => 'params', :locals => { :params => @uri_params } %>
<p>Example: A document by Whitman <%= example_link("/search.xml?id=http://www.whitmanarchive.org/criticism/reviews/leaves/leaves55/dailytimes") %></p>
</div>

<h2><div class="expander" data-target="meta"></div>Meta Queries</h2>
<div id="meta" class="exp_target hidden">
<p>You can also get information about the index with one of these calls:</p>
<p><%= example_link("/archives.xml") %> : To get a list of all the possible archives</p>
<p><%= example_link("/genres.xml") %> : To get a list of all the possible genres</p>
<p><%= example_link("/federations.xml") %> : To get a list of all the possible federations</p>
</div>

<hr />
<% if user_signed_in? %>
	<%= link_to "Manage genres", genres_path %> | <%= link_to "Manage archives", archives_path %> | <%= link_to "Manage federations", federations_path %> | <%= link_to "Log out", destroy_user_session_path %>
<% else %>
<%= link_to "admin", new_user_session_path %>
<% end %>
